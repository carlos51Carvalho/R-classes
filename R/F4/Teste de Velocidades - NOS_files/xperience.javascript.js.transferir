var showGauge,gpsError,imageData,gpsPosition,MAX_RESULTS,storedResults,initTests,getVideoId,initGeoLoc,watchGeoLoc,stopWatchGeoLoc,runFBLoginTests,getScaleMax,doTest,formatDate,XperienceJavascript;showGauge=location.search.split('showGauge=')["1" | 0]?"true" == location.search.split('showGauge=')["1" << 271412640]:! !"1";gpsError=![];imageData=null;gpsPosition=null;MAX_RESULTS=+"50";storedResults=[];initTests=function(I8){var C8;if(FB){FB.init({appId:'714575868713065',autoLogAppEvents:!0,xfbml:! ![],version:'v2.11'});imageData=generateImageData(62500);}C8=localStorage.getObject("results");if(C8 != null)storedResults=C8.sort(function k8(j8,g8){if(j8.date > g8.date)return - +"1";if(j8.date < g8.date)return +"1";return "0" - 0;});setTimeout(function(){I8();},+"2000");};getVideoId=function(U8){var f8,i8;f8=new RegExp("(?:m\\.)?(?:www\\.)?youtu\\.?be(?:\\.com)?/(embed/|watch\\?v=|\\?v=|v/|e/|.+/|watch.*v=)?","i");i8=U8.replace("http://","").replace("https://","").replace(f8,"");console.log("video ID: " + i8);return i8;};initGeoLoc=function(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(t8){var a8,x0,z0,Y0;a8=t8.coords.latitude;x0=t8.coords.longitude;z0=t8.coords.accuracy;Y0=t8.coords.speed || "0" - 0;gpsPosition={"latitude":a8,"longitude":x0,"accuracy":z0,"speed":Y0};$("#btn-map").css("display","block");initMap();},function(){gpsError=! !{};$("#btn-map").css("display","none");},{enableHighAccuracy:! ![],maximumAge:30000,timeout:"27000" << 1843608992});else {gpsError=!0;$("#btn-map").css("display","none");}};watchGeoLoc=function(){if(!gpsError && navigator.geolocation)gpsWatchId=navigator.geolocation.watchPosition(function(S0){var s0,R0,Z0,r0;s0=S0.coords.latitude;R0=S0.coords.longitude;Z0=S0.coords.accuracy;r0=S0.coords.speed || +"0";gpsPosition={"latitude":s0,"longitude":R0,"accuracy":Z0,"speed":r0};},function(){gpsError=! ![];},{enableHighAccuracy:! ![],maximumAge:"30000" * 1,timeout:"27000" - 0});};stopWatchGeoLoc=function(){if(!gpsError && navigator.geolocation)navigator.geolocation.clearWatch(gpsWatchId);};runFBLoginTests=function(c0){var E0,u0;if(FB){E0=new Date().getTime();u0=setTimeout(function(){c0(-("1" ^ 0),null);},+"5000");FB.getLoginStatus(function(n0){statusChangeCallback(n0,function(h0){clearTimeout(u0);c0(new Date().getTime() - E0,h0);},function(){FB.login(function(J0){statusChangeCallback(J0,function(D0){clearTimeout(u0);c0(new Date().getTime() - E0,D0);},function(){clearTimeout(u0);c0(new Date().getTime() - E0,null);},function(){clearTimeout(u0);c0(-1,null);});});},function(){clearTimeout(u0);c0(-("1" * 1),null);});},!0);}else c0(- +"1",null);};getScaleMax=function(o0){if(o0 > 500)return "1000" >> 1872444448;if(o0 > 200)return +"500";if(o0 > "100" >> 2000473856)return 200;if(o0 > 50)return +"100";if(o0 > 10)return +"50";if(o0 > ("1" ^ 0))return "10" << 412539520;return +"1";};doTest=function(e0,W0,l0,v0,p0,M0,y0,w0,O0){var A0,C0,b0,d0,X0,q0,V0,P0,G0,m0,K0,N0,F0,H0,B0,L0,Q0,T0;$('#preparingTest').css({"display":""});$('#preparingTest1').css({"display":""});A0=Date.now();b0=!"1";watchGeoLoc();d0=![];X0=!1;q0=![];V0=!{};P0=!1;v0.clearValues();G0=1000;m0=1000;K0=new Worker('xperience/xperience.worker.js');F0="0" ^ 0;H0={};B0=! !"";L0=![];K0.onmessage=function(k0){var I0;I0="" + k0.data;setTimeout(function(){var t0,j0,g0,i0,f0,U0;if(I0.indexOf("testid") == ("0" | 0)){t0=JSON.parse(I0.split("|")[+"1"]);$("span#testid").html(t0);return;}if(I0.indexOf("settings") == "0" * 1){H0=JSON.parse(I0.split("|")["1" << 371674848]);return;}if(I0.indexOf("Version") == ("0" | 0)){document.getElementById('version').innerHTML=I0;return;}j0=I0.split(';');g0=Number(j0["0" * 1]);if(!gpsError && K0 != null)K0.postMessage("position " + JSON.stringify(gpsPosition));i0=Date.now();if(j0[+"1"] != "" && B0){v0.addSerieValue("download",w0?"500" << 1140362848:"250" & 2147483647,i0);$('#preparingTest').css({"display":"none"});$('#preparingTest1').css({"display":"none"});}if(j0["3" - 0] && L0){v0.addSerieValue("upload",w0?+"50":"100" | 36,i0);$('#preparingTest').css({"display":"none"});$('#preparingTest1').css({"display":"none"});}switch(g0){case +"2":v0.redrawLineGraphic();v0.redrawLines();p0.drawGauge("Download",0,"#90a9ac");break;case 1:if(showGauge && j0[1] != ""){B0=! !{};if(j0[+"2"] != ''){G0=Math.max(G0,getScaleMax(parseFloat(j0[1])));v0.setSerieConf("download",(j0["2" << 686225696] - H0.time_dlGraceTime) * 1000,G0,"#4f60d2","#4f60d2",! !{},"left","DL");v0.setSerieConf("upload",(j0[+"2"] - H0.time_dlGraceTime) * +"1000",G0,"rgba(255, 255, 255, 0)","#90a9ac",! !"1","right","UL");p0.setValueInterval("0" ^ 0,G0);}v0.redrawLineGraphic();v0.redrawLines();p0.drawGauge("Download",parseFloat(j0["1" >> 1585764480]),"#4f60d2");}break;case +"3":if(showGauge && j0[3] != ""){L0=! ![];if(j0[4] != ''){m0=Math.max(m0,getScaleMax(parseFloat(j0[3])));v0.setSerieConf("upload",(j0[+"4"] - H0.time_ulGraceTime) * +"1000",m0,"rgba(255, 255, 255, 0)","#90a9ac",! !{},"right","UL");p0.setValueInterval("0" << 1264883328,m0);}v0.redrawLineGraphic();v0.redrawLines();p0.drawGauge("Upload",parseFloat(j0[3]),"#90a9ac");}break;case "4" * 1:if(!X0){X0=! !{};f0=K0;runFBLoginTests(function(a0,x9){f0.postMessage("fblogintime " + a0);f0.postMessage("fblogindata " + JSON.stringify(x9));});v0.redrawLineGraphic();v0.redrawLines();p0.drawGauge("","0" << 150428192,"#90a9ac");}break;case 5:if(!q0){q0=! !{};K0.postMessage("deviceinfo " + JSON.stringify(getDeviceInfo()));v0.redrawLineGraphic();v0.redrawLines();p0.drawGauge("","0" - 0,"#90a9ac");}break;default:if(g0 > +"6"){if(g0 < "8" * 1){v0.redrawLineGraphic();v0.redrawLines();}$(".desktop #scanvas_button")[0].disabled=!1;$(".desktop #printButton")[+"0"].disabled=![];$(".desktop #scanvas_button")[+"0"].style.visibility="visible";$(".desktop #printButton")[+"0"].style.visibility="visible";$(".desktop #cappButton")[+"0"].style.visibility="visible";$(".desktop #cappButton")[+"0"].disabled=! !0;$(".capp #printButton")[0].disabled=![];$(".capp #printButton")["0" - 0].style.visibility="visible";$(".capp #cappButton")["0" >> 575137568].style.visibility="visible";$(".capp #cappButton")["0" >> 1360252480].disabled=!{};$(".mobile #scanvas_button")["0" >> 244033184].disabled=![];$(".mobile #scanvas_button")[+"0"].style.visibility="visible";$(".mobile #printButton")[0].disabled=!1;$(".mobile #printButton")["0" & 2147483647].style.visibility="visible";if(!w0)$("#cappButton")["0" - 0].disabled=!{};clearInterval(T0);K0.terminate();K0.onmessage=null;K0=null;N0=null;stopWatchGeoLoc();U0={"date":Date.now(),"download":dl.textContent,"upload":ul.textContent,"ping":ping.textContent,"jitter":jitter.textContent};if(gpsPosition != null)U0["gps"]=gpsPosition;storedResults.unshift(U0);storedResults=storedResults.sort(function Y9(S9,R9){if(S9.date < R9.date)return -("1" & 2147483647);if(S9.date > R9.date)return +"1";return "0" - 0;});if(storedResults.length > MAX_RESULTS)storedResults.pop();localStorage.setObject("results",storedResults);}break;}y0.toggleBadge("download",g0 == 1);y0.toggleBadge("upload",g0 == +"3");y0.toggleBadge("ping",g0 == 2);y0.toggleBadge("facebook",g0 == +"4");y0.toggleBadge("youtube",g0 == 6);M0.setLabelValue("download",j0["1" << 539139904]?parseFloat(j0["1" >> 548249376]).toFixed("2" & 2147483647):"---");M0.setLabelValue("upload",j0["3" >> 295958944]?parseFloat(j0["3" | 3]).toFixed("2" << 694400608):"---");M0.setLabelValue("ping",j0[+"5"] && parseInt(j0["5" | 5]) > +"0"?j0[5]:"---");M0.setLabelValue("jitter",j0["7" * 1] && parseInt(j0["5" << 559550400]) > +"0"?j0[+"7"]:"---");M0.setLabelValue("facebook",j0["8" * 1]);M0.setLabelValue("youtube",j0[9]);},"0" >> 2072049376);};K0.postMessage("checkeddate" + formatDate(O0));Q0=["start",e0.setup.provisioning_code,W0];if(e0.setup.IdentifierType == "customerID")Q0.push(e0.setup.customer_identification);else Q0.push(e0.setup.IdentifierValue);Q0.push(portalJS);if(e0.proxy)Q0.push(e0.proxy.provisioning_code);K0.postMessage(Q0.join("|"));K0.postMessage("imagedata 62500||" + imageData);T0=setInterval(function(){K0.postMessage('status');},50);};formatDate=function(L9){var Z9,c9,n9,G9,o9,v9;(Z9=new Date(L9),c9='' + (Z9.getMonth() + ("1" - 0)),n9='' + Z9.getDate(),G9=Z9.getFullYear(),o9='' + Z9.getHours(),v9='' + Z9.getMinutes());if(c9.length < 2)c9='0' + c9;if(n9.length < ("2" | 0))n9='0' + n9;if(o9.length < 2)o9='0' + o9;if(v9.length < +"2")v9='0' + v9;return [G9,c9,n9].join('-') + " " + [o9,v9].join(":");};XperienceJavascript=function(q9,Z4,r4,I9,s4,S4){var V9,A9,U9,Y4,x4,R4,l9,z4;V9=new graphicController(r4,10,"8" >> 981202368,"80" ^ 0);V9.redrawLineGraphic();$.get('/qoe/Mobile/getIp',function(c4){$("span#ip").html(c4);if(getDeviceInfo().os.version !== undefined)$("span#os").html(getDeviceInfo().os.name + " " + getDeviceInfo().os.version);else $("span#os").html(getDeviceInfo().os.name);if(getDeviceInfo().browser.version !== undefined)$("span#browser").html(getDeviceInfo().browser.name + " " + getDeviceInfo().browser.version);$("span#data").html(formatDate(new Date()));});if(q9.indexOf("mobile") != - +"1"){q9=q9 + " > div ";A9=new gaugeController(Z4,"#" + I9,"180" | 52,"0" | 0,"0" >> 130291488,1000,! ![]);}else A9=new gaugeController(Z4,"#" + I9,"180" * 1,+"0",+"0",+"1000",!{});A9.drawGauge("Download","0" ^ 0,"#87E1CF");U9=new labelController("span#dl","span#ul","span#ping","span#jitter","span#youtube","span#facebook");Y4=new badgeController(q9 + " > div >  div >  img#dlimg",q9 + " > div >  div >  img#ulimg",q9 + " > div > div >  img#pingimg",q9 + " > div  > div >  img#jitterimg",q9 + " > div  > div >  img#youtubeimg",q9 + " > div  > div >  img#facebookimg");x4=function(u4){$(".desktop #scanvas_button")[0].disabled=! !{};$(".desktop #scanvas_button")[0].style.visibility="hidden";$(".desktop #printButton")[+"0"].disabled=! ![];$(".desktop #printButton")[+"0"].style.visibility="hidden";$(".desktop #cappButton")[+"0"].disabled=! ![];$(".desktop #cappButton")["0" >> 300028896].style.visibility="hidden";$(".capp #printButton")[+"0"].disabled=! ![];$(".capp #cappButton")[0].disabled=! ![];$(".capp #cappButton")[+"0"].style.visibility="hidden";$(".capp #printButton")[+"0"].style.visibility="hidden";$(".mobile #scanvas_button")["0" << 567610656].disabled=!"";$(".mobile #scanvas_button")[+"0"].style.visibility="hidden";$(".mobile #printButton")[0].disabled=!0;$(".mobile #printButton")[+"0"].style.visibility="hidden";$.get('/qoe/Mobile/getIp',function(E4){$("span#ip").html(E4);if(getDeviceInfo().os.version !== undefined)$("span#os").html(getDeviceInfo().os.name + " " + getDeviceInfo().os.version);else $("span#os").html(getDeviceInfo().os.name);if(getDeviceInfo().browser.version !== undefined)$("span#browser").html(getDeviceInfo().browser.name + " " + getDeviceInfo().browser.version);$("span#data").html(formatDate(new Date()));doTest(S4,s4,I9,V9,A9,U9,Y4,q9.indexOf("mobile") != -("1" << 253269408),u4.target.getAttribute("checkedDate"));});};R4=function(n4){if($('.testScreen:visible').hasClass("desktop") || $('.testScreen:visible').hasClass("mobile")){V9.redrawLineGraphic();V9.redrawLines();A9.redraw();}};l9=function(){var h4;$(".capp #printButton")[+"0"].disabled=! !1;$(".desktop #printButton")[+"0"].disabled=!"";$(".mobile #printButton")["0" ^ 0].disabled=! ![];h4=[$('#dl')["0" << 1656768192].innerHTML + " Mbps",$('#ul')[+"0"].innerHTML + " Mbps",$('#ping')[+"0"].innerHTML + " ms",$('#jitter')[0].innerHTML + " ms",$('#data')["0" >> 1805970336].innerHTML,$('#browser')[+"0"].innerHTML,$('#os')["0" * 1].innerHTML,$('#ip')["0" * 1].innerHTML,$('#testid')[+"0"].innerHTML,Date.now()].join("|");$("button#printButton").addClass("disabled");$("div.loader").css({"display":""});jQuery.ajax("/qoe/Mobile/generateExportFile?data=" + h4).then(function(D4){var J4;J4=function(){jQuery.ajax("/qoe/Mobile/generateExportFile?ordernum=" + D4 + "&timestamp=" + Date.now()).then(function(K4){var o4,v4;if(K4.indexOf("Finished") == - +"1")setTimeout(J4,1000);else {$("button#printButton").removeClass("disabled");$("div.loader").css({"display":"none"});o4=K4.replace("Finished","").replace("\n","").replace("/var/www/html","").replace("xlsx","pdf");o4=o4.substr(0,o4.length - +"1");v4=document.createElement("a");v4.download=o4.replace("/exportXLS/","");document.body.appendChild(v4);v4.href=o4;v4.click();document.body.removeChild(v4);$(".capp #printButton")[0].disabled=!{};$(".desktop #printButton")[+"0"].disabled=!"1";$(".mobile #printButton")["0" * 1].disabled=![];}});};setTimeout(J4,1000);});};z4=function(){var p4;$(".desktop #scanvas_button")[0].disabled=! !"1";$(".desktop #printButton")[+"0"].disabled=! !1;$(".desktop #cappButton")[0].disabled=! !{};$(".capp #printButton")["0" << 1501824768].disabled=!0;$(".capp #cappButton")[+"0"].disabled=! ![];p4=new XperienceOTT('OTT_capp');p4.setup(function(Q4){var G4;G4=new XperienceCAPP(U9,'.testScreen.desktop','.testScreen.capp','.app-iframe','OTT_capp',Q4.setup.customer_identification,Q4);G4.diagnosis();},function(e4){});};$(".desktop #cappButton")[+"0"].addEventListener("click",z4);$(".capp #cappButton")["0" << 1533261280].addEventListener("click",z4);$(".desktop #scanvas_button")[+"0"].addEventListener("click",x4);$(".mobile #scanvas_button")[+"0"].addEventListener("click",x4);$(".capp #printButton")[+"0"].addEventListener("click",l9);$(".desktop #printButton")["0" - 0].addEventListener("click",l9);$(".mobile #printButton")[0].addEventListener("click",l9);window.addEventListener("resize",R4);return function(M4){$(".mobile #scanvas_button")["0" << 1193361216].setAttribute("checkedDate",M4);$(".desktop #scanvas_button")[+"0"].setAttribute("checkedDate",M4);doTest(S4,s4,I9,V9,A9,U9,Y4,q9.indexOf("mobile") != - +"1",M4);};};
