(function(n){"use strict";n.fn.stacktable=function(t){var r=this,i=n.extend({},{id:"stacktable small-only",hideOriginal:!0},t);return r.each(function(){var u=n('<table class="'+i.id+'"><tbody><\/tbody><\/table>'),t,r,f;typeof i.myClass!==undefined&&u.addClass(i.myClass);t="";r=n(this);r.addClass("stacktable large-only");f=r.find("tr").eq(0);r.find("tr").each(function(i){t+="<tr>";i===0?t+='<tr><th class="st-head-row st-head-row-main" colspan="2">'+n(this).find("th,td").eq(0).html()+"<\/th><\/tr>":n(this).find("td,th").each(function(i){i===0?t+='<tr><th class="st-head-row" colspan="2">'+n(this).html()+"<\/th><\/tr>":n(this).html()!==""&&(t+="<tr>",t+=f.find("td,th").eq(i).html()?'<td class="st-key">'+f.find("td,th").eq(i).html()+"<\/td>":'<td class="st-key"><\/td>',t+='<td class="st-val">'+n(this).html()+"<\/td>",t+="<\/tr>")})});u.append(n(t));r.before(u);i.hideOriginal||r.show()})};n.fn.stackcolumns=function(t){var r=this,i=n.extend({},{id:"stacktable small-only",hideOriginal:!0},t);return r.each(function(){var r,s,f,e,t,h,c,o,u,l;if(r=n(this),s=r.find("tr").eq(0).find("td,th").length,!(s<3)){for(f=n('<table class="'+i.id+'"><\/table>'),typeof i.myClass!==undefined&&f.addClass(i.myClass),r.addClass("stacktable large-only"),e=n("<tbody><\/tbody>"),t=1,l=function(i){var r=n("<tr><\/tr>");i===0&&r.addClass("st-head-row st-head-row-main");h=n(this).find("td,th").eq(0).clone().addClass("st-key");o=t;n(this).find("*[colspan]").length&&(u=0,n(this).find("td,th").each(function(){var i=n(this).attr("colspan");return i?(i=parseInt(i,10),o-=i-1,u+i>t&&(o+=u+i-t-1),u+=i):u+=1,u>t?!1:void 0}));c=n(this).find("td,th").eq(o).clone().addClass("st-val").removeAttr("colspan");i===0?(e.append(n('<tr class="table-margin"><\/tr>')),r.append(c,h)):r.append(h,c);e.append(r)};t<s;)r.find("tr").each(l),t+=1;f.append(n(e));r.before(f);i.hideOriginal||r.show()}})}})(jQuery);